<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">

    <context:annotation-config/>

    <bean id="sqlService" class="com.roozen.register.service.SqlService">
        <property name="createItemTableSql">
            <value>
                <![CDATA[
                    CREATE TABLE IF NOT EXISTS item
                        (
                            ID     INT           NOT NULL,
                            NAME   VARCHAR(255)  NOT NULL,
                            PRICE  DECIMAL       NOT NULL,
                            PRIMARY KEY (ID)
                        )
                ]]>
            </value>
        </property>
        <property name="createOrderTableSql">
            <value>
                <![CDATA[
                    CREATE TABLE IF NOT EXISTS orders
                        (
                            ID          INT         NOT NULL,
                            SUBTOTAL    DECIMAL     NOT NULL,
                            TAX         DECIMAL     NOT NULL,
                            GRANDTOTAL  DECIMAL     NOT NULL,
                            ORDERNO     INT         NULL,
                            TIMESTAMP   TIMESTAMP   NOT NULL,
                            PRIMARY KEY (ID)
                        )
                ]]>
            </value>
        </property>
        <!-- TODO: Discuss whether we feel we need to add extended price to the table, or just recalculate it as needed -->
        <property name="createOrderLineItemTableSql">
            <value>
                <![CDATA[
                    CREATE TABLE IF NOT EXISTS order_line_item
                        (
                            ORDER_ID    INT             NOT NULL,
                            ITEM_ID     VARCHAR(255)    NOT NULL,
                            QTY         INT             NOT NULL,
                            PRICE       DECIMAL         NOT NULL,
                            PRIMARY KEY (ORDER_ID, ITEM_ID)
                        )
                ]]>
            </value>
        </property>
        <property name="createTenderRecordTableSql">
            <value>
                <![CDATA[
                    CREATE TABLE IF NOT EXISTS tender_record
                        (
                            ORDER_ID    INT             NOT NULL,
                            AMOUNT      DECIMAL         NOT NULL,
                            CHANGE_AMT  DECIMAL         NOT NULL,
                            TIMESTAMP   TIMESTAMP      NOT NULL,
                            PRIMARY KEY (ORDER_ID)
                        )
                ]]>
            </value>
        </property>

    </bean>
</beans>